<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>::: OtStore :::</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <style>
        .samesize {
            width: 100%;
            padding-bottom: 100%;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">OtStore</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="product.html">Product</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">
                                <img src="./images/login.png" width="20px" height="20px" style="margin-left: 2px;">
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cart.html">
                                <img src="./images/shoppingcart.png" width="23px" height="23px" style="margin-top: -2px;">
                            </a>
                        </li>
                    </ul>
                </form>
            </div>
        </div>
    </nav>

    <div class="container" style="margin-top: 40px;">
        <p>
            <h1 style="margin-bottom: 30px;">Shopping Cart</h1>
        </p>
        <table class="table table-striped text-center">
            <col width="20%">
            <col width="20%">
            <col width="20%">
            <col width="20%">
            <col width="20%">
            <thead>
                <tr>
                    <th scope="col" class="text-center"></th>
                    <th scope="col" class="text-center">PRODUCT</th>
                    <th scope="col" class="text-center">PRICE</th>
                    <th scope="col" class="text-center">QUANTITY</th>
                    <th scope="col" class="text-center">REMOVE</th>
                </tr>
            </thead>
            <tbody id="content"></tbody>
        </table>
    </div>

    <div class="container" style="margin-top: 40px;">
        <div class="row">
            <div class="col-lg-7"></div>
            <div class="col-lg-5">
                <div class="row" style="margin-bottom: 20px;">
                    <div class="col-6">CART TOTAL</div>
                    <div class="col-6 text-right"><span id="carttotal"></span> won</div>
                </div>
                <div class="row" style="margin-bottom: 20px;">
                    <div class="col-6">TAX</div>
                    <div class="col-6 text-right"><span id="tax"></span> won</div>
                </div>
                <div class="row" style="margin-bottom: 20px;">
                    <div class="col-6">SHIPPING</div>
                    <div class="col-6 text-right"><span id="shipping"></span> won</div>
                </div>
                <hr>
                <div class="row" style="margin-bottom: 40px;">
                    <div class="col-6">ORDER TOTAL</div>
                    <div class="col-6 text-right"><span id="ordertotal"></span> won</div>
                </div>
                <div class="row" style="margin-bottom: 10px">
                    <button type="button" class="btn btn-dark col-12">PAYMENT</button>
                </div>
                <div class="row">
                    <button type="button" class="btn btn-light col-12" onclick="location.href='product.html'">CONTINUE SHOPPING</button>
                </div>
            </div>
        </div>
    </div>

    <div style="margin-top: 60px; background-color: rgba(0, 0, 0, 0.93); color: rgba(255, 255, 255, 0.8);">
        <div class="container">
            <div class="row" style="padding: 20px;">
                <div class="col-lg">
                    <p>About us</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Pellentesque volutpat dolor feugiat bibendum ultricies. Sed congue sollicitudin nisi et convallis. Nullam
                        vitae nunc sit amet lectus volutpat convallis. Nulla pharetra a augue eu vulputate. Aliquam in erat
                        rhoncus sapien lobortis lacinia ut a ipsum. Donec at molestie ipsum. Maecenas vel volutpat nibh,
                        vel iaculis lorem. Etiam tincidunt odio at lectus pulvinar venenatis.</p>
                </div>
                <div class="col-lg">
                    <p>Delivery Information</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Duis dui libero, efficitur in consequat ac, bibendum non elit. Aliquam facilisis pulvinar ligula sit
                        amet sagittis. Fusce dapibus eros at ante iaculis luctus. Donec quis mi eget dolor accumsan rhoncus
                        molestie sed ante. Vivamus auctor viverra ante non euismod. Donec felis enim, viverra ut ultrices
                        at, dignissim vel leo. Maecenas in aliquam tortor. In non posuere sapien, et fermentum tellus. Mauris
                        elit ligula, suscipit nec consequat id, finibus sed nisl. Donec malesuada est dui, nec mattis purus
                        imperdiet vitae.</p>
                </div>
                <div class="col-lg">
                    <p>Privacy & Policy</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Aliquam erat volutpat. Etiam commodo diam lobortis est pharetra, at lobortis dolor porttitor. Proin malesuada
                        convallis magna, in dignissim ipsum viverra quis. In sit amet lectus eget ex feugiat placerat vitae
                        sit amet ipsum. Proin tempor sodales odio tempor rhoncus. Maecenas sit amet leo pharetra nisl imperdiet
                        volutpat. Aliquam nibh orci, vestibulum ut massa at, venenatis tincidunt turpis. Etiam pulvinar pulvinar
                        consequat.
                    </p>
                </div>
                <div class="col-lg">
                    <p>Another Menu</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Nullam vel fringilla arcu. Nullam magna magna, luctus quis bibendum at, venenatis sed tellus. Nunc fringilla
                        ante vitae aliquam tincidunt. Pellentesque habitant morbi tristique senectus et netus et malesuada
                        fames ac turpis egestas. Maecenas nunc neque, volutpat id vestibulum eu, placerat non quam. Praesent
                        nec magna tristique, facilisis mi quis, convallis nisi. Phasellus auctor pretium pharetra. Pellentesque
                        venenatis eu diam a sagittis.</p>
                </div>
            </div>
        </div>
    </div>
    <div style="background-color: rgb(0, 0, 0)">
        <div class="container">
            <p style="padding: 20px; color: rgba(255,255,255,0.7)">
                CopyrightÂ© Cheolhyeon 2018. All Right Reserved.
            </p>
        </div>
    </div>

    <script src="./js/jquery-3.3.1.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="js/common.js"></script>
    <script>
        $.getJSON(commonURL+'/json/check', function (result) {
            if (result == 0) {
                location.href = 'login.html';
            }
            var userNumber = result;

            $.getJSON(commonURL+'/json/cartList?userNumber='+userNumber, function (data) {
                var htmlTag = ``;
                var sum = 0;
                for (i = 0; i < data.length; i++) {
                    htmlTag += `<tr>
                                    <td>
                                        <div class="img-thumbnail samesize" style="background-image: url('${data[i].file}'"></div>
                                    </td>
                                    <td class="align-middle">${data[i].title}</td>
                                    <td class="align-middle">${data[i].price}</td>
                                    <td class="align-middle">${data[i].quantity}</td>
                                    <td class="align-middle">
                                        <a class="remove" href="#" value="${data[i].cartNo}"><img src="./images/trash.png" width="20px" height="20px"></a>
                                    </td>
                                </tr>`
                    sum += data[i].price * data[i].quantity;
                }
                $("#content").append($(htmlTag));
                $("#carttotal").append(sum);
                $("#tax").append(sum*0.05);
                var ship = sum >= 50000 ? 0 : 2500;
                $("#shipping").append(ship);
                $("#ordertotal").append(sum+sum*0.05+ship);

                $(".remove").click(function() {
                    var cartNo = $(this).attr('value');
                    $.getJSON(commonURL+'/json/removeCart?cartNo='+cartNo, function (result) {
                        location.reload();
                    });
                });
            });
        });
    </script>
</body>

</html>