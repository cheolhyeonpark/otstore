<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>::: OtStore :::</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <style>
        .samesize {
            width: 100%;
            padding-bottom: 100%;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
        }

        .btmg {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">OtStore</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home

                        </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="product.html">Product
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">
                                <img src="./images/login.png" width="20px" height="20px" style="margin-left: 2px;">
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cart.html">
                                <img src="./images/shoppingcart.png" width="23px" height="23px" style="margin-top: -2px;">
                            </a>
                        </li>
                    </ul>
                </form>
            </div>
        </div>
    </nav>

    <div class="container" style="margin-top: 40px">
        <div class="row">
            <div class="col-md-5" style="margin-bottom: 20px;">
                <div class="img-thumbnail samesize" id="prodImg"></div>
            </div>
            <div class="col-md-7">
                <p>
                    <h1>
                        <span id="title"></span>
                    </h1>
                </p>
                <p>
                    <h5>
                        <span id="price"></span> won</h5>
                </p>
                <p>Nunc faucibus vel tellus non elementum. In at lacus volutpat, tincidunt ligula nec, sollicitudin dui. Donec
                    at molestie ipsum. Maecenas vel volutpat nibh.</p>
                <p>Stock :
                    <span id="stock"></span>
                </p>
                <p>Color :
                    <select class="custom-select" id="color"></select>
                </p>
                <p>Size :
                    <select class="custom-select">
                        <option selected>size</option>
                        <option value="1">xs</option>
                        <option value="2">s</option>
                        <option value="3">m</option>
                        <option value="4">l</option>
                        <option value="5">xl</option>
                    </select>
                </p>
                <p>
                    <div class="input-group" style="width: 150px;">
                        Quantity :&nbsp
                        <input type="number" class="form-control" id="quantity" value="1">
                    </div>
                </p>
                <p>
                    <button type="button" class="btn btn-dark" id="addBtn">Add to Cart</button>
                </p>
            </div>
        </div>
    </div>

    <div class="container" style="margin-top: 40px">
        <p>
            <h3>DESCRIPTION</h3>
        </p>
        <div id="content"></div>
    </div>

    <div class="container" style="margin-top: 40px;">
        <img src="./images/fashion.jpg" width="100%">
    </div>

    <div style="margin-top: 40px; background-color: rgba(0, 0, 0, 0.93); color: rgba(255, 255, 255, 0.8);">
        <div class="container">
            <div class="row" style="padding: 20px;">
                <div class="col-lg">
                    <p>About us</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Pellentesque volutpat dolor feugiat bibendum ultricies. Sed congue sollicitudin nisi et convallis. Nullam
                        vitae nunc sit amet lectus volutpat convallis. Nulla pharetra a augue eu vulputate. Aliquam in erat
                        rhoncus sapien lobortis lacinia ut a ipsum. Donec at molestie ipsum. Maecenas vel volutpat nibh,
                        vel iaculis lorem. Etiam tincidunt odio at lectus pulvinar venenatis.</p>
                </div>
                <div class="col-lg">
                    <p>Delivery Information</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Duis dui libero, efficitur in consequat ac, bibendum non elit. Aliquam facilisis pulvinar ligula sit
                        amet sagittis. Fusce dapibus eros at ante iaculis luctus. Donec quis mi eget dolor accumsan rhoncus
                        molestie sed ante. Vivamus auctor viverra ante non euismod. Donec felis enim, viverra ut ultrices
                        at, dignissim vel leo. Maecenas in aliquam tortor. In non posuere sapien, et fermentum tellus. Mauris
                        elit ligula, suscipit nec consequat id, finibus sed nisl. Donec malesuada est dui, nec mattis purus
                        imperdiet vitae.</p>
                </div>
                <div class="col-lg">
                    <p>Privacy & Policy</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Aliquam erat volutpat. Etiam commodo diam lobortis est pharetra, at lobortis dolor porttitor. Proin malesuada
                        convallis magna, in dignissim ipsum viverra quis. In sit amet lectus eget ex feugiat placerat vitae
                        sit amet ipsum. Proin tempor sodales odio tempor rhoncus. Maecenas sit amet leo pharetra nisl imperdiet
                        volutpat. Aliquam nibh orci, vestibulum ut massa at, venenatis tincidunt turpis. Etiam pulvinar pulvinar
                        consequat.
                    </p>
                </div>
                <div class="col-lg">
                    <p>Another Menu</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Nullam vel fringilla arcu. Nullam magna magna, luctus quis bibendum at, venenatis sed tellus. Nunc fringilla
                        ante vitae aliquam tincidunt. Pellentesque habitant morbi tristique senectus et netus et malesuada
                        fames ac turpis egestas. Maecenas nunc neque, volutpat id vestibulum eu, placerat non quam. Praesent
                        nec magna tristique, facilisis mi quis, convallis nisi. Phasellus auctor pretium pharetra. Pellentesque
                        venenatis eu diam a sagittis.</p>
                </div>
            </div>
        </div>
    </div>
    <div style="background-color: rgb(0, 0, 0)">
        <div class="container">
            <p style="padding: 20px; color: rgba(255,255,255,0.7)">
                CopyrightÂ© Cheolhyeon 2018. All Right Reserved.
            </p>
        </div>
    </div>

    <script src="./js/jquery-3.3.1.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="js/common.js"></script>
    <script>
        var params = location.href.split('?')[1].split('=')[1];
        var userNumber = 0;
        var prodNo = 0;
        var price;
        var filepath;
        var title;

        $.getJSON(commonURL + '/json/check', function (result) {
            userNumber = result;
        });

        $.getJSON(commonURL + '/json/view?prodNo=' + params, function (result) {
            var htmlTag = ``;
            var imgfile = commonURL + '/files/' + result.file;
            $("#prodImg").css("background-image", `url('${imgfile}')`);
            $("#title").append(result.title);
            $("#price").append(result.price);
            $("#stock").append(result.stock);
            var col = result.color.split(';');
            var htmlTag = `<option selected>color</option>`;
            for (var i = 0; i < col.length; i++) {
                htmlTag += `<option value="${col[i]}">${col[i]}</option>`
            }
            $("#color").append(htmlTag);
            $("#content").append(result.content);
            prodNo = result.prodNo;
            title = result.title;
            price = result.price;
            filepath = result.file;
        });

        $("#addBtn").click(function addClick(file) {
            if (userNumber == 0) {
                location.href = 'login.html';
            }
            $.ajax(commonURL + '/json/insertCart', {
                method: 'POST',
                dataType: 'json',
                data: {
                    userNumber: userNumber,
                    prodNo: prodNo,
                    title: title,
                    color: $("#color").val(),
                    price: price,
                    quantity: $("#quantity").val(),
                    file: filepath
                },
                success: function (data) {
                    if (!data.err) {
                        location.href = 'cart.html';
                    } else {
                        console.log(data.error);
                    }
                }
            });
        });
    </script>
</body>

</html>