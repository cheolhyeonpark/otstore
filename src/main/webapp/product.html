<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>::: OtStore :::</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <style>
        .samesize {
            margin-bottom: 10px;
            width: 100%;
            padding-bottom: 100%;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
        }

        .btmg {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">OtStore</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home

                        </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="product.html">Product
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">
                                <img src="./images/login.png" width="20px" height="20px" style="margin-left: 2px;">
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cart.html">
                                <img src="./images/shoppingcart.png" width="23px" height="23px" style="margin-top: -2px;">
                            </a>
                        </li>
                    </ul>
                </form>
            </div>
        </div>
    </nav>

    <div class="container" style="margin-top: 40px">
        <div class="row">
            <div class="col-md-3 btmg">
                <nav class="navbar navbar-light bg-light">
                    <ul class="nav flex-column navbar-nav mr-auto mt-2 mt-lg-0">
                        <li class="nav-item">
                            <a class="nav-link category" href="#" value="0">All</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category" href="#" value="1">Clothing</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category" href="#" value="2">Shoes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category" href="#" value="3">Accessories</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category" href="#" value="4">Bag</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category" href="#" value="5">Gift</a>
                        </li>
                        <li class="nav-item" style="display: none" id="addProd">
                            <a class="nav-link" href="write.html">add Product</a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="col-md-9" id="productList"></div>
        </div>
    </div>

    <div style="margin-top: 40px; background-color: rgba(0, 0, 0, 0.93); color: rgba(255, 255, 255, 0.8);">
        <div class="container">
            <div class="row" style="padding: 20px;">
                <div class="col-lg">
                    <p>About us</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Pellentesque volutpat dolor feugiat bibendum ultricies. Sed congue sollicitudin nisi et convallis. Nullam
                        vitae nunc sit amet lectus volutpat convallis. Nulla pharetra a augue eu vulputate. Aliquam in erat
                        rhoncus sapien lobortis lacinia ut a ipsum. Donec at molestie ipsum. Maecenas vel volutpat nibh,
                        vel iaculis lorem. Etiam tincidunt odio at lectus pulvinar venenatis.</p>
                </div>
                <div class="col-lg">
                    <p>Delivery Information</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Duis dui libero, efficitur in consequat ac, bibendum non elit. Aliquam facilisis pulvinar ligula sit
                        amet sagittis. Fusce dapibus eros at ante iaculis luctus. Donec quis mi eget dolor accumsan rhoncus
                        molestie sed ante. Vivamus auctor viverra ante non euismod. Donec felis enim, viverra ut ultrices
                        at, dignissim vel leo. Maecenas in aliquam tortor. In non posuere sapien, et fermentum tellus. Mauris
                        elit ligula, suscipit nec consequat id, finibus sed nisl. Donec malesuada est dui, nec mattis purus
                        imperdiet vitae.</p>
                </div>
                <div class="col-lg">
                    <p>Privacy & Policy</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Aliquam erat volutpat. Etiam commodo diam lobortis est pharetra, at lobortis dolor porttitor. Proin malesuada
                        convallis magna, in dignissim ipsum viverra quis. In sit amet lectus eget ex feugiat placerat vitae
                        sit amet ipsum. Proin tempor sodales odio tempor rhoncus. Maecenas sit amet leo pharetra nisl imperdiet
                        volutpat. Aliquam nibh orci, vestibulum ut massa at, venenatis tincidunt turpis. Etiam pulvinar pulvinar
                        consequat.
                    </p>
                </div>
                <div class="col-lg">
                    <p>Another Menu</p>
                    <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">Nullam vel fringilla arcu. Nullam magna magna, luctus quis bibendum at, venenatis sed tellus. Nunc fringilla
                        ante vitae aliquam tincidunt. Pellentesque habitant morbi tristique senectus et netus et malesuada
                        fames ac turpis egestas. Maecenas nunc neque, volutpat id vestibulum eu, placerat non quam. Praesent
                        nec magna tristique, facilisis mi quis, convallis nisi. Phasellus auctor pretium pharetra. Pellentesque
                        venenatis eu diam a sagittis.</p>
                </div>
            </div>
        </div>
    </div>
    <div style="background-color: rgb(0, 0, 0)">
        <div class="container">
            <p style="padding: 20px; color: rgba(255,255,255,0.7)">
                CopyrightÂ© Cheolhyeon 2018. All Right Reserved.
            </p>
        </div>
    </div>

    <script src="./js/jquery-3.3.1.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="js/common.js"></script>
    <script>
        $.getJSON(commonURL + '/json/check', function (result) {
            if (result == 1) {
                $(addProd).css('display', 'block');
            }
        });

        getProductList(1, 0);

        function getProductList(page, category) {
            $("#productList").html('');
            $.getJSON(commonURL + '/json/list?page=' + page + '&category=' + category, function (result) {
                var htmlTag = ``;
                for (i = 0; i < result.length; i++) {

                    if (i % 3 == 0) htmlTag += `<div class='row'>`;

                    htmlTag += `<div class="col-md btmg">
                                    <a href="view.html?prod=${result[i].prodNo}"><div class="img-thumbnail samesize" style="background-image: url('${result[i].file}')"></div></a>
                                    <div>
                                        <p class="text-center font-weight-bold" style="margin-bottom: 5px">${result[i].title}</p>
                                        <p class="text-center" style="font-size: 0.75em">${result[i].price} won</p>
                                    </div>
                                </div>`;

                    if (i % 3 == 2) htmlTag += `</div>`;
                }
                if (result.length % 3 != 2) htmlTag += `</div>`;

                $("#productList").append($(htmlTag));
                getTotalPage(page, category);
            });
        }

        function getTotalPage(page, category) {
            $.getJSON(commonURL + '/json/total?category=' + category, function (result) {
                var totalPage = result % 12 == 0 ? parseInt(result / 12) : parseInt(result / 12 + 1);
                pagenation(page, totalPage);
                $(".page-link").click(function () {
                    getProductList($(this).attr('value'), category);
                });
            });
        }

        function pagenation(now, total) {
            var start = parseInt((now - 1) / 10) + 1;
            var end = start + 9 < total ? start + 9 : total;
            var htmlTag = `<nav aria-label="Page navigation">
                             <ul class="pagination justify-content-center">`;
            if (start == 1) htmlTag += `<li class="page-item disabled">`;
            else htmlTa += `<li class="page-item">`;
            htmlTag += `<a class="page-link" href="#" aria-label="Previous">
                        <span aria-hidden="true" id="#prevPage">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>`;
            for (var i = start; i <= end; i++) {
                if (i == now) htmlTag += `<li class="page-item active">`;
                else htmlTag += `<li class="page-item">`;
                htmlTag += `<a class="page-link" href="#" value="${i}">${i}</a>
                        </li>`;
            }
            if (end == total) htmlTag += `<li class="page-item disabled">`
            else htmlTag += `<li class="page-item">`
            htmlTag += `<a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true" id="nextPage">&raquo;</span>
                            <span class="sr-only">Next</span>
                        </a>
                    </li>
                </ul>	
            </nav>`
            $("#productList").append($(htmlTag));
            $("#prevPage").click(function () {
                if (start != 1) getProductList(start - 1, category);
            });
            $("#nextPage").click(function () {
                if (end != total) getProductList(end + 1, category);
            });
        }

        $(".category").click(function () {
            getProductList(1, $(this).attr('value'));
        });
    </script>
</body>

</html>